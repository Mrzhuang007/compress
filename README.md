# 压缩软件
## 问题描述和基本要求
用哈夫曼编码设计一个压缩软件
能对输入的任何类型的文件进行哈夫曼编码，产生编码后的文件--压缩文件
能对输入的压缩文件进行译码，生成压缩前的文件--解压文件
## 工具/准备工作
### 综合实验中涉及的数据结构知识。
字符串、哈夫曼树、哈夫曼编码、查找技术
### 使用的C++集成开发环境
Codeblock 17.02，QT Creator 5.10
## 分析与实现
### 分析综合实验项目的实现方法
#### 如何压缩文件/压缩原理？
任何字符在计算机中的均以8个比特单位存储。但是在一个文件里，并不是所有字符都会出现或出现次数都相等。因此，我们可以用少于8个比特单位来表示一个字符，让在文件中出现频率较多的字符用更少的比特单位表示。最后，就把原文件的字符串编码为我们自定义的比特串，我们以8个比特为一个单位，将其重新写入压缩文件，这样我们就能实现文件的压缩了。
此外，我们还需将源文件的大小，每个字符对应的频率写入压缩文件。写入文件的格式为：源文件大小-回车-出现字符个数-回车-字符对应ASCII值-空格-频率-回车-编码后字符串。
#### 如何解压文件/解压原理？
首先读取压缩文件，会得到三个内容：源文件大小、每个字符的频率、编码后字符串。我们根据每个字符的频率重新生成我们的编码方式，然后将编码后的字符串重新转换为比特串，再跟我们的编码方式进行一一匹配，由于这里的字符频率表已经按照字符的ASCII值排序好，我们利用折半查找的方法会缩短我们匹配的时间。找到相同的比特串，就解码出相应的原字符，根据源文件的大小就可以解码出相应数量的字符，写入到解压文件中，即达成解码的目的。
#### 如何处理中文或其它字符的压缩？
我们知道，ASCII码由八个比特组成，最多只有256个，范围为-128-127，那要怎么表示ASCII值之外的其他字符呢？比如说中文文字，中文文字是由两个字符组成，经过检验，系统将利用两个连续的负的ASCII值表示该中文文字。
## 采用适当的数据结构与算法（Why、What、How）
根据上述的分析，很容易想到利用树的结构中的哈夫曼编码来实现。以不同字符出现的频率当做叶子节点的权重构建哈夫曼树。随后，规定哈夫曼树左分支代表0，右分支代表1，将从根结点到每个叶子结点经过的路径组成的01序列作为该叶子结点对应字符的编码，完成哈夫曼编码的构建。
## 界面的实现
分析软件的基本功能，得出该压缩软件需具备的基本功能包括：用户选择压缩文件，用户选择压缩输出路径，用户选择解压文件，用户选择解压输出路径，相应压缩和解压按钮。
## 总结
### 程序界面设计
首先是程序运行的主界面如图所示，利用qt进行的界面开发，其中将压缩与解压分为单独的界面，中间为程序主要功能，输入输出路径的选择，下方为进度条，时时反馈压缩/解压进度。
![](https://github.com/Mrzhuang007/compress/blob/master/main.png)
### 对不同类型文件压缩率的分析
![](https://github.com/Mrzhuang007/compress/blob/master/image.png)  
通过对比我们发现，该程序对于文本类的文件进行压缩的效果是比较好的。其他诸如图片和音频影像的压缩率不够好的原因在于该类文件在生成的时候就已经通过一定的算法实现了压缩。
### 结论
通过实验证明，该综合实验程序基本满足综合实验题目的要求。其中，压缩和解压的速度跟文件的大小基本成正比，经过测试发现，压缩80M左右的文件需要一分钟左右。
系统存在不足，该系统只能压缩单个文件，对于文件夹或多个文件的压缩，目前尚不能实现。
